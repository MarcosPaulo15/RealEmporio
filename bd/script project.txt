script bd

--create table clients, table for register all clients of my client. 
CREATE TABLE CLIENTES(ID INTEGER PRIMARY KEY AUTOINCREMENT, NOME VARCHAR(100) NOT NULL, TELEFONE VARCHAR(11), WHATSAPP CHAR(1) DEFAULT(0) NOT NULL, ENDERECO VARCHAR(250), BAIRRO VARCHAR(250), 
ATIVO CHAR(1) DEFAULT(0))

CREATE TABLE USUARIOS(ID INTEGER PRIMARY KEY AUTOINCREMENT, NOME VARCHAR(100) NOT NULL, USUARIO VARCHAR(100) NOT NULL, SENHA VARCHAR(50) NOT NULL);

INSERT INTO USUARIOS VALUES(1, 'ADMINISTRADOR', 'ADMIN', '12345');


CREATE TABLE PRODUTOS(CODIGO INTEGER PRIMARY KEY, NOME VARCHAR(200) NOT NULL, DESCRICAO VARCHAR(2000), QUANTIDADE INTEGER DEFAULT(0));
ALTER TABLE PRODUTOS ADD COLUMN VALOR DECIMAL(10,2) DEFAULT(0,00);
ALTER TABLE PRODUTOS ADD COLUMN DATA DATETIME;

ALTER TABLE USUARIOS ADD COLUMN PERFIL CHAR(1) DEFAULT(0);

CREATE TABLE VENDAS(CODIGO INTEGER PRIMARY KEY AUTOINCREMENT, ID_PRODUTO INTEGER NOT NULL, VALOR VARCHAR(10) NOT NULL, DATA DATE NOT NULL);
ALTER TABLE VENDAS ADD COLUMN ID_USER CHAR('4');

CREATE TABLE REL_TIPO_ENTRADA_CAIXA(CODIGO INTEGER PRIMARY KEY AUTOINCREMENT, DATA DATE NOT NULL, TIPO_ENTRADA CHAR(1) NOT NULL, VALOR_TOTAL DECIMAL(10,2) NOT NULL);

ALTER TABLE REL_TIPO_ENTRADA_CAIXA ADD COLUMN ID_VENDA INTEGER NOT NULL;
ALTER TABLE REL_TIPO_ENTRADA_CAIXA ADD COLUMN ID_USER INTEGER;
ALTER TABLE REL_TIPO_ENTRADA_CAIXA ADD COLUMN FECHAMENTO_CAIXA CHAR(1) DEFAULT(0);
ALTER TABLE REL_TIPO_ENTRADA_CAIXA ADD COLUMN APROVA_FECHAMENTO CHAR(1) DEFAULT(0);


CREATE TABLE TIPO_ENTRADA(CODIGO INTEGER PRIMARY KEY, NOME VARCHAR(100)) 


SELECT RTE.DATA, SUM(RTE.TIPO_ENTRADA) AS TIPO, TE.NOME AS TIPO_PAGAMENTO, RTE.VALOR_TOTAL AS TOTAL  FROM REL_TIPO_ENTRADA_CAIXA  RTE LEFT JOIN TIPO_ENTRADA TE ON TE.CODIGO = RTE.TIPO_ENTRADA WHERE DTE.TIPO_ENTRADA IN ('8', '10') GROUP BY RTE.TIPO_ENTRADA 

ALTER TABLE REL_TIPO_ENTRADA_CAIXA ADD COLUMN CODIGO_CLIENTE CHAR(3)
